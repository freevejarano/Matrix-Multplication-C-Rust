use std::time::{Duration, Instant};

struct Matrix {
    dat: [[f32; 10]; 10]
}
 
impl Matrix {
    pub fn mult_m(a: Matrix, b: Matrix) -> Matrix
    {
        let mut out = Matrix {
            dat: [[0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
            [0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
            [0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
            [0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
            [0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
            [0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
            [0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
            [0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
            [0., 0., 0., 0., 0., 0., 0., 0., 0., 0.],
            [0., 0., 0., 0., 0., 0., 0., 0., 0., 0.]]
        };
 
        for i in 0..10{
            for j in 0..10 {
                for k in 0..10 {
                    out.dat[i][j] += a.dat[k][i] * b.dat[k][j];
                }
            }
        }
 
        out
    }
 
    pub fn print(self)
    {
        for i in 0..10 {
            for j in 0..10 {
                print!("{} ", self.dat[i][j]);
            }
            print!("\n");
        }
    }
}
 
fn main()
{
    let  a = Matrix {
        dat: [[1., 11., 21., 31., 41., 51., 61., 71., 81., 91.],
        [2., 12., 22., 32., 42., 52., 62., 72., 82., 92.],
        [3., 13., 23., 33., 43., 53., 63., 73., 83., 93.],
        [4., 14., 24., 34., 44., 54., 64., 74., 84., 94.],
        [5., 15., 25., 35., 45., 55., 65., 75., 85., 95.],
        [6., 16., 26., 36., 46., 56., 66., 76., 86., 96.],
        [7., 17., 27., 37., 47., 57., 67., 77., 87., 97.],
        [8., 18., 28., 38., 48., 58., 68., 78., 88., 98.],
        [9., 19., 29., 39., 49., 59., 69., 79., 89., 99.],
        [10., 20., 30., 40., 50., 60., 70., 80., 90., 100.]]
    };
 
    let  b = Matrix {
        dat: [[100., 99., 98., 97., 96., 95., 94., 93., 92., 91.],
        [110., 109., 108., 107., 106., 105., 104., 103., 102., 101.],
        [120., 119., 118., 117., 116., 115., 114., 113., 112., 111.],
        [130., 129., 128., 127., 126., 125., 124., 123., 122., 121.],
        [140., 139., 138., 137., 136., 135., 134., 133., 132., 131.],
        [150., 149., 148., 147., 146., 145., 144., 143., 142., 141.],
        [160., 159., 158., 157., 156., 155., 154., 153., 152., 151.],
        [170., 169., 168., 167., 166., 165., 164., 163., 162., 161.],
        [180., 179., 178., 177., 176., 175., 174., 173., 172., 171.],
        [190., 189., 188., 187., 186., 185., 184., 183., 182., 181.]]
    };
 
 
    let start = Instant::now();
    let c = Matrix::mult_m(a, b);
    let duration = start.elapsed();
    println!("AxB");
    c.print();

    println!("Time: {:?}", duration);
}